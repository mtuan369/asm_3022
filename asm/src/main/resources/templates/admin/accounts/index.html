<div xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/index :: dynamic(~{::main})}">
    <main>
        <div class="card mb-4 border-0 shadow-sm">
            <div class="card-header bg-white text-dark fw-bold border-bottom text-uppercase">
                <i class="fas fa-user-cog text-warning me-2"></i> Quản Lý Tài Khoản
            </div>
            <div class="card-body">
                <form th:object="${item}" method="post">
                    <div class="row">
                        <div class="col-md-3 text-center">
                            <div class="mb-3">
                                <img th:src="*{photo}"
                                     id="previewImage"
                                     class="img-thumbnail rounded-circle shadow-sm"
                                     style="width: 150px; height: 150px; object-fit: cover;"
                                     onerror="this.src='https://cdn-icons-png.flaticon.com/512/149/149071.png'">
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-bold text-muted">Link Ảnh / Tên file</label>
                                <input th:field="*{photo}" class="form-control form-control-sm"
                                       placeholder="Dán link ảnh online vào đây..."
                                       onchange="document.getElementById('previewImage').src = this.value">
                            </div>
                        </div>

                        <div class="col-md-9">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="fw-bold">Tên đăng nhập (Username)</label>
                                    <input th:field="*{username}" class="form-control" placeholder="Nhập username..."
                                           th:readonly="${item.username != null}">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="fw-bold">Mật khẩu</label>
                                    <input th:field="*{password}" type="password" class="form-control" placeholder="Nhập mật khẩu...">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="fw-bold">Họ và tên</label>
                                    <input th:field="*{fullname}" class="form-control" placeholder="Nhập họ tên...">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="fw-bold">Email</label>
                                    <input th:field="*{email}" type="email" class="form-control" placeholder="example@gmail.com">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="fw-bold d-block text-muted">Vai trò</label>
                                    <div class="form-check form-check-inline">
                                        <input th:field="*{admin}" class="form-check-input" type="radio" value="true" id="roleAdmin">
                                        <label class="form-check-label text-danger fw-bold" for="roleAdmin">Admin</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input th:field="*{admin}" class="form-check-input" type="radio" value="false" id="roleUser">
                                        <label class="form-check-label text-primary" for="roleUser">Khách hàng</label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="fw-bold d-block text-muted">Trạng thái</label>
                                    <div class="form-check form-check-inline">
                                        <input th:field="*{activated}" class="form-check-input" type="radio" value="true" id="statusActive">
                                        <label class="form-check-label text-success" for="statusActive">Hoạt động</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input th:field="*{activated}" class="form-check-input" type="radio" value="false" id="statusInactive">
                                        <label class="form-check-label text-muted" for="statusInactive">Khóa</label>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-3 pt-3 border-top">
                                <button formaction="/admin/accounts/create" class="btn btn-warning text-white fw-bold">
                                    <i class="fas fa-plus"></i> Thêm mới
                                </button>
                                <button formaction="/admin/accounts/update" class="btn btn-success fw-bold">
                                    <i class="fas fa-save"></i> Cập nhật
                                </button>
                                <a href="/admin/accounts/delete"
                                   th:attr="onclick='if(!confirm(\'Bạn có chắc chắn muốn xóa?\')) return false;'"
                                   th:href="@{|/admin/accounts/delete/${item.username}|}"
                                   class="btn btn-danger fw-bold"
                                   th:if="${item.username != null}">
                                    <i class="fas fa-trash"></i> Xóa
                                </a>
                                <a href="/admin/accounts/index" class="btn btn-secondary">
                                    <i class="fas fa-redo"></i> Làm mới
                                </a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="card border-0 shadow-sm">
            <div class="card-header bg-dark text-white fw-bold">
                <i class="fas fa-users"></i> DANH SÁCH NGƯỜI DÙNG
            </div>
            <div class="card-body p-0">
                <table class="table table-hover align-middle mb-0">
                    <thead class="bg-light">
                    <tr>
                        <th class="text-center">Avatar</th>
                        <th>Username</th>
                        <th>Họ và tên</th>
                        <th>Email</th>
                        <th>Vai trò</th>
                        <th>Trạng thái</th>
                        <th class="text-center">Hành động</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="acc : ${items}">
                        <td class="text-center">
                            <img th:src="${acc.photo}"
                                 style="width: 40px; height: 40px; object-fit: cover;"
                                 class="rounded-circle border"
                                 onerror="this.src='https://cdn-icons-png.flaticon.com/512/149/149071.png'">
                        </td>
                        <td th:text="${acc.username}" class="fw-bold"></td>
                        <td th:text="${acc.fullname}"></td>
                        <td th:text="${acc.email}"></td>
                        <td>
                            <span th:if="${acc.admin}" class="badge bg-danger">Quản trị</span>
                            <span th:unless="${acc.admin}" class="badge bg-primary">Khách</span>
                        </td>
                        <td>
                            <span th:if="${acc.activated}" class="badge bg-success">Active</span>
                            <span th:unless="${acc.activated}" class="badge bg-secondary">Locked</span>
                        </td>
                        <td class="text-center">
                            <a th:href="@{|/admin/accounts/edit/${acc.username}|}" class="btn btn-sm btn-outline-warning border-0">
                                <i class="fas fa-edit fa-lg"></i>
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>